<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">

<html>
<head>


 <title>Meilenstein2</title>
    <link rel="stylesheet" type="text/css" href="index.css">
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
<script language="javascript" type="text/javascript" src="invalid.js"></script>
   
function validateInput () {
    document.myform.vorname.style.borderColor="initial";
    document.myform.name.style.borderColor="initial";
    document.myform.email.style.borderColor="initial";
    document.myform.matrikelnr.style.borderColor="initial";
    document.myform.handy.style.borderColor="initial";

    //Validierung: Vorname.
    if (document.myform.vorname.value == "") {
        console.log("vorname leere Eingabe.");
        alert("Einige Eingaben sind fehlerhaft.Bitte überprüfen Sie ihre Eingaben");
        document.myform.vorname.focus();
        document.myform.vorname.style.borderColor="red";
        return false;
  }else{ //Vorname wurde eingegeben.(nicht leer).
        var flag=false;
        for (i = 0; i < document.myform.vorname.value.length; ++i){
            if (document.myform.vorname.value.toLowerCase().charAt(i) < "a" ||
            document.myform.vorname.value.toLowerCase().charAt(i) > "z"){
            flag=true;
            
            }
        }
        if(flag){
            console.log("vorname enthält ungültige Zeichen.");
            alert("Einige Eingaben sind fehlerhaft.Bitte überprüfen Sie ihre Eingaben");
            document.myform.vorname.focus();
            document.myform.vorname.style.borderColor="red";
            return false;
        }
        
    }
    //Validierung: Name.
    if (document.myform.name.value == "") {
    console.log("name leere Eingabe.");
    alert("Einige Eingaben sind fehlerhaft.Bitte überprüfen Sie ihre Eingaben");
    document.myform.name.focus();
    document.myform.name.style.borderColor="red";
    return false;
  }else{ //Vorname wurde eingegeben.(nicht leer).
        var flag=false;
        for (i = 0; i < document.myform.name.value.length; ++i){
            if (document.myform.name.value.toLowerCase().charAt(i) < "a" ||
            document.myform.name.value.toLowerCase().charAt(i) > "z"){
            flag=true;
            }
        }
        if(flag){
            console.log("name enthält ungültige Zeichen.");
            alert("Einige Eingaben sind fehlerhaft.Bitte überprüfen Sie ihre Eingaben");
            document.myform.name.focus();
            document.myform.name.style.borderColor="red";
            return false;
        }
        
    }
    
    //Validierung: email.
    if (document.myform.email.value == "") {
        console.log("email leere Eingabe.");
        alert("Einige Eingaben sind fehlerhaft.Bitte überprüfen Sie ihre Eingaben");
        document.myform.email.focus();
        document.myform.email.style.borderColor="red";
        return false;
    }
    
    //@-index finden. + überprüfen auf Einmalvorkommen.
    var indxAt=-1;
    var counter=0;
    for(i=0; i < document.myform.email.value.length;++i){
        if(document.myform.email.value.charAt(i)=='@'){
            ++counter;
            indxAt=i;
        }
        //hier auf ungültige Zeichen überprüfen
        //Leerzeichen darf nicht auftauchen
        if(document.myform.email.value.charAt(i)==' '){
            console.log("email Leerzeichen nicht erlaubt.");
            alert("Einige Eingaben sind fehlerhaft.Bitte überprüfen Sie ihre Eingaben");
            document.myform.email.focus();
            document.myform.email.style.borderColor="red";
            return false;
        }
    }
    if(indxAt==-1 || (counter != 1)){
        console.log("email ungültiges Format.-kein oder mehr als ein @-Zeichen");
        alert("Einige Eingaben sind fehlerhaft.Bitte überprüfen Sie ihre Eingaben");
        document.myform.email.focus();
        document.myform.email.style.borderColor="red";
        return false;
    }
    // an dieser Stelle wurde die Position des @ zeichens gefunden.
    //den punkt nach dem @ finden.
    var indxPt=-1;
    for(i=indxAt; i < document.myform.email.value.length;++i){
        if(document.myform.email.value.charAt(i)=='.'){
            indxPt=i;
            //hier wird nur der Letzte Punkt gespeichert. bsp: @stud.hs.de
        }
    }
    if(indxPt==-1){
        console.log("email ungültiges Format.-kein Punkt nach dem @-Zeichen");
        alert("Einige Eingaben sind fehlerhaft.Bitte überprüfen Sie ihre Eingaben");
        document.myform.email.focus();
        document.myform.email.style.borderColor="red";
        return false;
    }
    
    
    var vorstring=document.myform.email.value.substring(0, indxAt);
    var nachstring=document.myform.email.value.substring(indxAt+1, indxPt);
    var domainstring=document.myform.email.value.substring(indxPt+1, document.myform.email.value.length);
    //console.log("vorstring:"+vorstring+","+"nachstring:"+nachstring+","+"domainstring:"+domainstring+".");
    
    var flagMail=false;
    //substrings auf ungültige zeichen überprüfen.
    if(nachstring.charAt(0)=='.'){
        console.log("email ungültiges Format. Punkt nach dem @Zeichen ist unzulässig.");
        flagMail=true;
    }
    if(domainstring=='de'||domainstring=='org'||domainstring=='net'||domainstring=='com'){
        ;
    }else{
        console.log("email ungültiges Format.-gültige domainnames: de/org/net/com");
        flagMail=true;
    }
    if(vorstring.length<=0||nachstring.length<=0){
        console.log("email ungültiges Format. Keine Eingabe vor oder nach dem @-Zeichen gefunden.");
        flagMail=true;
    }
    if(flagMail){
        console.log("email ungültiges Format.");
        alert("Einige Eingaben sind fehlerhaft.Bitte überprüfen Sie ihre Eingaben");
        document.myform.email.focus();
        document.myform.email.style.borderColor="red";
        return false;
    }

    //Validierung: Matrikelnr.
    if (document.myform.matrikelnr.value == "") {
        console.log("matrikelnr leere Eingabe.");
        alert("Einige Eingaben sind fehlerhaft.Bitte überprüfen Sie ihre Eingaben");
        document.myform.matrikelnr.focus();
        document.myform.matrikelnr.style.borderColor="red";
        return false;
    }else{
        var flagMrtklnr = false;
        
        for (i = 0; i < document.myform.matrikelnr.value.length; ++i){
            if (document.myform.matrikelnr.value.charAt(i) < "0" ||
             document.myform.matrikelnr.value.charAt(i) > "9"){
                console.log("matrikelnr enthält ungültige Zeichen.");
                flagMrtklnr = true;
            }
             if(document.myform.matrikelnr.value.charAt(0)==0){
                 console.log("matrikelnr beginnt mit 0. Ungültige Eingabe.");
                 flagMrtklnr = true;
             }
        }
        if (flagMrtklnr) {
            alert("Einige Eingaben sind fehlerhaft.Bitte überprüfen Sie ihre Eingaben");
            document.myform.matrikelnr.focus();
            document.myform.matrikelnr.style.borderColor="red";
            return false;
        }
    }

    //Validierung: Handynummer.
    if (document.myform.handy.value == "") {
        console.log("handy leere Eingabe.");
        alert("Einige Eingaben sind fehlerhaft.Bitte überprüfen Sie ihre Eingaben");
        document.myform.handy.focus();
         document.myform.handy.style.borderColor="red";
        return false;
    }else{
        var flaghandy = false;
        var failNr=-1;
        for (i = 0; i < document.myform.handy.value.length; ++i){
            if (document.myform.handy.value.charAt(i) < "0" ||
             document.myform.handy.value.charAt(i) > "9"){
                failNr=0;
                flaghandy = true;
            }
             if(document.myform.handy.value.charAt(0)!=0){
                 failNr=1;
                 flaghandy = true;
             }
        }
        if (flaghandy) {
            if(failNr==0){
                console.log("handynr enthält ungültige Zeichen.");
            }else if(failNr==1){
                console.log("handynr beginnt nicht mit 0. Ungültige Eingabe.");
            }else{
                ;//Nichts unternehmen. Wert: -1
            }
            alert("Einige Eingaben sind fehlerhaft.Bitte überprüfen Sie ihre Eingaben");
            document.myform.handy.focus();
            document.myform.handy.style.borderColor="red";
            return false;
        }
    }
      
    console.log("Validierung erfolgreich.");
    

}
</head>

<body>

<div id="header">
    <h1>Anmeldung</h1>

</div><!--#header-->

<div id="foot">
    <p>Hier könnt ihr euch für eine Messe eurer Wahl anmelden</p>
</div>


<div id="link">
    <img src="http://fc01.deviantart.net/fs71/i/2011/042/0/3/black_and_yellow__pika_pika_by_deadpoolrko-d39bfld.jpg" width="200" height="200" alt="Pikachu"></div>

<div id="main">
    <form action="http://martinakraus.net/hsmannheim.php" method="get" onsubmit="return validateInput()">
        <table>
            <tr>
                <td>
                    <table>
                        <tr>
                            <td>Vorname:</td>
                            <td><input name="vorname" type="text" size="30" maxlength="30"></td>
                        </tr>

                        <tr>
                            <td> Name:</td>
                            <td><input name="name" type="text" size="30" maxlength="30"></td>
                        </tr>

                        <tr>
                            <td> Email:</td>
                            <td><input name="email" type="text" size="30" maxlength="30"></td>
                        </tr>

                        <tr>
                            <td> Matrikelnummer:</td>
                            <td><input name="matrikelnummer" type="tel" size="30" maxlength="30"></td>
                        </tr>

                        <tr>
                            <td> Handynummer:</td>
                            <td><input name="Handynummer" type="tel" size="30" maxlength="30"></td>
                        </tr>

                        <tr>
                            <td> Studiengang:</td>
                            <td>
                                <select name="studiengang">
                                    <option value="IB">IB</option>
                                    <option value="IMB">IMB</option>
                                    <option value="UIB">UIB</option>
                                </select>
                            </td>
                        </tr>

                        <tr>
                            <td>Messe:</td>
                            <td>
                                <input type="radio" name="messe" value="CeBit" checked> CeBIT <br>
                                <input type="radio" name="messe" value="ConIT"> ConIT <br>
                                <input type="radio" name="messe" value="Web Tech Con"> Web Tech Con <br>
                            </td>
                        </tr>


                        <tr>
                            <td>Absenden bitte hier klicken: <input type="image" src="http://www.dbz-path.ag.vu/Ani16.gif" alt="Absenden"></td>
                        </tr>
                    </table>
                </td>

                <td text align="right">
                    <div id="sidebar">
                        <p >Messe Infos</p>
                        <p > Bitte auf einen Link eurer Wahl klickem um weitere Infos über die Messen zu bekommen</p>
                        <p>
                            <a href="http://yellowandblack.github.io/CeBIT.html" > CeBIT</a><br>
                            <a href="http://yellowandblack.github.io/ConIT.html" > ConIT</a><br>
                            <a href="http://yellowandblack.github.io/WebTechCon.html"> WebTechCon</a><br>
                            <a href="http://yellowandblack.github.io/detail.html">Detail-Seite</a><br>
                        </p>
                    </div><!--#sidebar-->
                </td>

            </tr>
        </table>
 </div><!--#main-->
<br>

</form>

<script language="javascript" type="text/javascript" src="invalid.js"></script>





</body>
</html>
